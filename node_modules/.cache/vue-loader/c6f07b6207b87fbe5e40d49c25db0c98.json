{"remainingRequest":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-PWA/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-PWA/src/components/MealTableWeekComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-PWA/src/components/MealTableWeekComponent.vue","mtime":1606070635977},{"path":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-PWA/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-PWA/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-PWA/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-PWA/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgTWVhbFRhYmxlRGF0YVNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlL01lYWxUYWJsZURhdGFTZXJ2aWNlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWVhbFRhYmxlV2Vla0NvbXBvbmVudCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1lYWxUYWJsZXM6IHsKICAgICAgICBpZDogIiAiLAogICAgICAgIGNhbGVuZGFyV2VlazogIiIsCiAgICAgICAgbWVhbFRhYmxlV2VlazogewogICAgICAgICAgZGF5OiB7CiAgICAgICAgICAgIGlkOiAiICIsCiAgICAgICAgICAgIG5hbWU6ICIgIiwKICAgICAgICAgICAgdHlwZTogIiAiLAogICAgICAgICAgICBwcmljZTogIiAiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICB3ZWVrTWVhbFRhYmxlczogW10sCiAgICAgIGFtb3VudFdlZWtNZWFsVGFibGVzOiAnJywKICAgICAgc2VsZWN0ZWRNZWFsVGFibGU6ICcnLAogICAgICBzZWxlY3RlZE1lYWw6IHsKICAgICAgICBtZWFsVGFibGVXZWVrSWQ6ICcnLAogICAgICAgIG1lYWxJZDogJycsCiAgICAgICAgd2Vla2RheTogJycsCiAgICAgIH0sCiAgICAgIGFsZXJ0RmFpbGVkOiAnQmVmb3JlIHlvdSBkZWxldGUgYSBtZWFsIHlvdSBoYXZlIHRvIGNob29zZSB0aGUgY2FsZW5kYXIgd2Vlay4nLAogICAgICBhbGVydFN1Y2NlczogJ1RoZSByZW1vdmFsIHdhcyBzdWNjZXNmdWxseSBwcm9jZXNzZWQuJywKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoaWRlTW9kYWwoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ2RlbGV0ZS1tb2RhbCddLmhpZGUoKQogICAgfSwKICAgIHJlZnJlc2hNZWFsVGFibGUoaWQpIHsKICAgICAgTWVhbFRhYmxlRGF0YVNlcnZpY2UucmV0cmlldmVNZWFsVGFibGVCeUlkKGlkKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLm1lYWxUYWJsZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgfSk7CiAgICB9LAogICAgcmV0cmlldmVXZWVrTWVhbFRhYmxlcygpIHsKICAgICAgTWVhbFRhYmxlRGF0YVNlcnZpY2UucmV0cmlldmVBbGxNZWF0VGFibGVzKCkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy53ZWVrTWVhbFRhYmxlcyA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEFtb3VudFdlZWtNZWFsVGFibGVzIiwgewogICAgICAgICAgICAgIG5ld0Ftb3VudDogKHRoaXMud2Vla01lYWxUYWJsZXMubGVuZ3RoKSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuYW1vdW50V2Vla01lYWxUYWJsZXMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5hbW91bnRXZWVrTWVhbFRhYmxlcyArIDE7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0QW1vdW50V2Vla01lYWxUYWJsZXMiLCB7CiAgICAgICAgICAgICAgbmV3QW1vdW50OiB0aGlzLmFtb3VudFdlZWtNZWFsVGFibGVzLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZU1lYWxGcm9tV2Vla01lYWxUYWJsZXMoKSB7CiAgICAgIHRoaXMuaGlkZU1vZGFsKCkKICAgICAgTWVhbFRhYmxlRGF0YVNlcnZpY2UuZGVsZXRlTWVhbEZyb21UYWJsZVdlZWsodGhpcy5zZWxlY3RlZE1lYWwubWVhbFRhYmxlV2Vla0lkLCB0aGlzLnNlbGVjdGVkTWVhbC5tZWFsSWQsIHRoaXMuc2VsZWN0ZWRNZWFsLndlZWtkYXkpCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWxlcnQtZmFpbGVkIikuc3R5bGUuZGlzcGxheSA9ICJub25lIgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWxlcnQtc3VjY2VzIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayIKICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRNZWFsVGFibGUgIT09ICcnKSB7CiAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVhbFRhYmxlKHRoaXMuc2VsZWN0ZWRNZWFsVGFibGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhbGVydC1zdWNjZXMiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhbGVydC1mYWlsZWQiKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIgogICAgICAgICAgfSkKICAgIH0sCiAgICBsb2FkTWVhbEluZm8oa2V5LCBtZWFsSWQpIHsKICAgICAgaWYgKGtleSA9PSAnTW9uZGF5JykgewogICAgICAgIHRoaXMuc2VsZWN0ZWRNZWFsLndlZWtkYXkgPSAwOwogICAgICB9CiAgICAgIGlmIChrZXkgPT0gJ1R1ZXNkYXknKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZE1lYWwud2Vla2RheSA9IDE7CiAgICAgIH0KICAgICAgaWYgKGtleSA9PSAnV2VkbmVzZGF5JykgewogICAgICAgIHRoaXMuc2VsZWN0ZWRNZWFsLndlZWtkYXkgPSAyOwogICAgICB9CiAgICAgIGlmIChrZXkgPT0gJ1RodXJzZGF5JykgewogICAgICAgIHRoaXMuc2VsZWN0ZWRNZWFsLndlZWtkYXkgPSAzOwogICAgICB9CiAgICAgIGlmIChrZXkgPT0gJ0ZyaWRheScpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkTWVhbC53ZWVrZGF5ID0gNDsKICAgICAgfQogICAgICB0aGlzLnNlbGVjdGVkTWVhbC5tZWFsSWQgPSBtZWFsSWQ7CiAgICAgIHRoaXMuc2VsZWN0ZWRNZWFsLm1lYWxUYWJsZVdlZWtJZCA9IHRoaXMuc2VsZWN0ZWRNZWFsVGFibGU7CiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGNoZWNrVXNlcjogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudXNlclN0YXR1cyA9PSAnYWRtaW4nKSB7CiAgICAgICAgcmV0dXJuICdhZG1pbic7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvL3RoaXMucmVmcmVzaE1lYWxUYWJsZSgpOwogICAgdGhpcy5yZXRyaWV2ZVdlZWtNZWFsVGFibGVzKCk7CiAgfQp9Owo="},{"version":3,"sources":["MealTableWeekComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MealTableWeekComponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <section class=\"meal-table-week\">\n    <div class=\"container\">\n      <h1 class=\"page-title\">Week Plan</h1>\n      <div class=\"alert alert-success hide text-center\" id=\"alert-succes\" role=\"alert\">{{ alertSucces }}</div>\n      <div class=\"alert alert-danger hide text-center\" id=\"alert-failed\" role=\"alert\">{{ alertFailed }}</div>\n      <div class=\"form-group\">\n        <select class=\"form-control\" id=\"optionMenu\" v-model=\"selectedMealTable\"\n                @change=\"refreshMealTable(selectedMealTable)\">\n          <option value=\"\" disabled selected>Select Calendar Week</option>\n          <option v-for=\"weekMealTable in weekMealTables\" v-bind:key=\"weekMealTable.id\" v-bind:value=\"weekMealTable.id\">\n            {{ weekMealTable.calendarWeek }}\n          </option>\n        </select>\n      </div>\n      <div class=\"table-responsive\">\n        <table class=\"table\">\n          <thead>\n          <tr>\n            <th v-if=\"checkUser == 'admin'\">Actions</th>\n            <th scope=\"col\">Day</th>\n            <th scope=\"col\">ID</th>\n            <th>Meal</th>\n            <th>Type</th>\n            <th>Price ($)</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr v-for=\"(meal, key) in mealTables.mealTableWeek\" v-bind:key=\"meal.id\">\n            <td v-if=\"checkUser == 'admin'\">\n              <div>\n                <b-button variant=\"outline-danger\" @click=\"loadMealInfo(key, meal.id)\"\n                          v-b-modal.delete-modal>\n                  <div class=\"logo\">\n                    <img src=\"../../src/assets/images/trash-can.svg\" alt=\"trash can\">\n                  </div>\n                </b-button>\n              </div>\n            </td>\n            <td>{{ key }}</td>\n            <td>{{ meal.id }}</td>\n            <td>{{ meal.name }}</td>\n            <td>{{ meal.type }}</td>\n            <td>{{ meal.price }}</td>\n\n          </tr>\n          </tbody>\n        </table>\n      </div>\n      <router-link v-if=\"checkUser == 'admin'\" type=\"button\" class=\"btn btn-outline-warning add-button\"\n                   to=\"/mealtable/update\" tag=\"button\">Update\n        Meal Table\n      </router-link>\n      <router-link v-if=\"checkUser == 'admin'\" type=\"button\" class=\"btn btn-outline-info add-button\" to=\"/mealtable/add\"\n                   tag=\"button\">Add Meal Table\n      </router-link>\n      <router-link v-if=\"checkUser == 'admin'\" type=\"button\" class=\"btn btn-outline-danger add-button\"\n                   to=\"/mealtable/delete\" tag=\"button\">Delete Meal\n        Table\n      </router-link>\n      <!-- Modal -->\n      <b-modal id=\"delete-modal\" ref=\"delete-modal\" hide-footer title=\"Removal of a meal\">\n        <p class=\"my-4\">Are you want to delete the selected meal?</p>\n        <b-button class=\"modal-button\" variant=\"outline-danger\" block @click=\"hideModal\">Cancel</b-button>\n        <b-button class=\"modal-button\" variant=\"outline-info\" block @click=\"removeMealFromWeekMealTables\">Yes,\n          sure.\n        </b-button>\n      </b-modal>\n    </div>\n  </section>\n</template>\n\n<script>\n\nimport MealTableDataService from \"@/service/MealTableDataService\";\n\nexport default {\n  name: \"MealTableWeekComponent\",\n  data() {\n    return {\n      mealTables: {\n        id: \" \",\n        calendarWeek: \"\",\n        mealTableWeek: {\n          day: {\n            id: \" \",\n            name: \" \",\n            type: \" \",\n            price: \" \"\n          }\n        }\n      },\n      weekMealTables: [],\n      amountWeekMealTables: '',\n      selectedMealTable: '',\n      selectedMeal: {\n        mealTableWeekId: '',\n        mealId: '',\n        weekday: '',\n      },\n      alertFailed: 'Before you delete a meal you have to choose the calendar week.',\n      alertSucces: 'The removal was succesfully processed.',\n    };\n  },\n  methods: {\n    hideModal() {\n      this.$refs['delete-modal'].hide()\n    },\n    refreshMealTable(id) {\n      MealTableDataService.retrieveMealTableById(id)\n          .then(response => {\n            this.mealTables = response.data;\n          });\n    },\n    retrieveWeekMealTables() {\n      MealTableDataService.retrieveAllMeatTables()\n          .then(response => {\n            this.weekMealTables = response.data;\n\n            this.$store.commit(\"setAmountWeekMealTables\", {\n              newAmount: (this.weekMealTables.length),\n            });\n            this.amountWeekMealTables = this.$store.state.amountWeekMealTables + 1;\n            this.$store.commit(\"setAmountWeekMealTables\", {\n              newAmount: this.amountWeekMealTables,\n            });\n          });\n    },\n    removeMealFromWeekMealTables() {\n      this.hideModal()\n      MealTableDataService.deleteMealFromTableWeek(this.selectedMeal.mealTableWeekId, this.selectedMeal.mealId, this.selectedMeal.weekday)\n          .then(response => {\n            console.log(response)\n            document.getElementById(\"alert-failed\").style.display = \"none\"\n            document.getElementById(\"alert-succes\").style.display = \"block\"\n            if (this.selectedMealTable !== '') {\n              this.refreshMealTable(this.selectedMealTable);\n            }\n          })\n          .catch(error => {\n            console.log(error)\n            document.getElementById(\"alert-succes\").style.display = \"none\"\n            document.getElementById(\"alert-failed\").style.display = \"block\"\n          })\n    },\n    loadMealInfo(key, mealId) {\n      if (key == 'Monday') {\n        this.selectedMeal.weekday = 0;\n      }\n      if (key == 'Tuesday') {\n        this.selectedMeal.weekday = 1;\n      }\n      if (key == 'Wednesday') {\n        this.selectedMeal.weekday = 2;\n      }\n      if (key == 'Thursday') {\n        this.selectedMeal.weekday = 3;\n      }\n      if (key == 'Friday') {\n        this.selectedMeal.weekday = 4;\n      }\n      this.selectedMeal.mealId = mealId;\n      this.selectedMeal.mealTableWeekId = this.selectedMealTable;\n    }\n  },\n\n  computed: {\n    checkUser: function () {\n      if (this.$store.state.userStatus == 'admin') {\n        return 'admin';\n      }\n      return false;\n    },\n  },\n  created() {\n    //this.refreshMealTable();\n    this.retrieveWeekMealTables();\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n\nthead {\n  background: rgb(219, 3, 123);\n  background: linear-gradient(16deg, rgba(219, 3, 123, 1) 0%, rgba(219, 3, 218, 1) 81%);\n  color: white;\n}\n\n.page-title {\n  margin: 35px 0 35px 0;\n  text-align: center;\n  color: #DB037B;\n}\n\n.add-button {\n  margin: 30px 5px 10px 5px;\n}\n\n.modal-button {\n  margin: 15px 10px 10px 0;\n}\n\n#alert-failed {\n  margin: 30px 0 30px 0;\n  display: none;\n}\n\n#alert-succes {\n  margin: 30px 0 30px 0;\n  display: none;\n}\n\n</style>"]}]}