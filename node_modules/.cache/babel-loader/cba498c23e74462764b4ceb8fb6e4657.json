{"remainingRequest":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-RWA/vue-js-client-crud/node_modules/babel-loader/lib/index.js!/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-RWA/vue-js-client-crud/node_modules/eslint-loader/index.js??ref--13-0!/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-RWA/vue-js-client-crud/src/service/AuthenticationService.js","dependencies":[{"path":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-RWA/vue-js-client-crud/src/service/AuthenticationService.js","mtime":1605955282091},{"path":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-RWA/vue-js-client-crud/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-RWA/vue-js-client-crud/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-RWA/vue-js-client-crud/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL01hdGllbi9Eb2N1bWVudHMvVW5pL0JhY2hlbG9yYXJiZWl0L1Byb3RvdHlwZW4vUldBL2Zyb250ZW5kL01lbnNhLUZyb250RW5kLVJXQS92dWUtanMtY2xpZW50LWNydWQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvTWF0aWVuL0RvY3VtZW50cy9VbmkvQmFjaGVsb3JhcmJlaXQvUHJvdG90eXBlbi9SV0EvZnJvbnRlbmQvTWVuc2EtRnJvbnRFbmQtUldBL3Z1ZS1qcy1jbGllbnQtY3J1ZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgaHR0cCBmcm9tICcuLi9odHRwLWNvbW1vbic7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwoKdmFyIEF1dGhlbnRpY2F0aW9uU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQXV0aGVudGljYXRpb25TZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhlbnRpY2F0aW9uU2VydmljZSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0aGVudGljYXRpb25TZXJ2aWNlLCBbewogICAga2V5OiAicmVnaXN0ZXJTdWNjZXNmdWxMb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJTdWNjZXNmdWxMb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpIHsKICAgICAgdGhpcy5zZXR1cEF4aW9zSW50ZXJjZXB0b3JzKHRoaXMuY3JlYXRlQmFzaWNBdXRoVG9rZW4odXNlcm5hbWUsIHBhc3N3b3JkKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3RhcnRBdXRoZW50aWNhdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRBdXRoZW50aWNhdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpIHsKICAgICAgaWYgKHRoaXMuaXNVc2VyTG9nZ2VkSW4oKSkgewogICAgICAgIHJldHVybiByb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICBuYW1lOiAnbWVhbCcKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGh0dHAuZ2V0KCcvYmFzaWNhdXRoJywgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuY3JlYXRlQmFzaWNBdXRoVG9rZW4odXNlcm5hbWUsIHBhc3N3b3JkKQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlQmFzaWNBdXRoVG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUJhc2ljQXV0aFRva2VuKHVzZXJuYW1lLCBwYXNzd29yZCkgewogICAgICB2YXIgdG9rZW4gPSAnQmFzaWMgJyArIHdpbmRvdy5idG9hKHVzZXJuYW1lICsgIjoiICsgcGFzc3dvcmQpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCB0b2tlbik7CiAgICAgIHJldHVybiB0b2tlbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsb2dvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNVc2VyTG9nZ2VkSW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzVXNlckxvZ2dlZEluKCkgewogICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgICAgaWYgKHRva2VuID09PSBudWxsKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogInNldHVwQXhpb3NJbnRlcmNlcHRvcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwQXhpb3NJbnRlcmNlcHRvcnModG9rZW4pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGh0dHAuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICBpZiAoX3RoaXMuaXNVc2VyTG9nZ2VkSW4oKSkgewogICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHRva2VuOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNvbmZpZzsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQXV0aGVudGljYXRpb25TZXJ2aWNlOwp9KCk7CgpleHBvcnQgZGVmYXVsdCBuZXcgQXV0aGVudGljYXRpb25TZXJ2aWNlKCk7"},{"version":3,"sources":["/Users/Matien/Documents/Uni/Bachelorarbeit/Prototypen/RWA/frontend/Mensa-FrontEnd-RWA/vue-js-client-crud/src/service/AuthenticationService.js"],"names":["http","router","AuthenticationService","username","password","setupAxiosInterceptors","createBasicAuthToken","isUserLoggedIn","replace","name","get","headers","authorization","token","window","btoa","localStorage","setItem","removeItem","sessionStorage","clear","getItem","interceptors","request","use","config","Authorization"],"mappings":";;;;AAAA,OAAOA,IAAP,MAAiB,gBAAjB;AACA,OAAOC,MAAP,MAAmB,UAAnB;;IAGMC,qB;;;;;;;2CACqBC,Q,EAAUC,Q,EAAU;AACvC,WAAKC,sBAAL,CAA4B,KAAKC,oBAAL,CAA0BH,QAA1B,EAAoCC,QAApC,CAA5B;AACH;;;wCAEmBD,Q,EAAUC,Q,EAAU;AACpC,UAAG,KAAKG,cAAL,EAAH,EAA0B;AACtB,eAAON,MAAM,CAACO,OAAP,CAAe;AAACC,UAAAA,IAAI,EAAE;AAAP,SAAf,CAAP;AACH;;AACD,aAAOT,IAAI,CAACU,GAAL,CAAS,YAAT,EAAuB;AAACC,QAAAA,OAAO,EAAE;AAACC,UAAAA,aAAa,EAAE,KAAKN,oBAAL,CAA0BH,QAA1B,EAAoCC,QAApC;AAAhB;AAAV,OAAvB,CAAP;AACH;;;yCAEoBD,Q,EAAUC,Q,EAAU;AACrC,UAAIS,KAAK,GAAG,WAAWC,MAAM,CAACC,IAAP,CAAYZ,QAAQ,GAAG,GAAX,GAAiBC,QAA7B,CAAvB;AACAY,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,KAA9B;AACA,aAAOA,KAAP;AACH;;;6BAEQ;AACLG,MAAAA,YAAY,CAACE,UAAb,CAAwB,OAAxB;AACAC,MAAAA,cAAc,CAACC,KAAf;AACH;;;qCAEgB;AACb,UAAIP,KAAK,GAAGG,YAAY,CAACK,OAAb,CAAqB,OAArB,CAAZ;AACA,UAAIR,KAAK,KAAK,IAAd,EAAoB,OAAO,KAAP;AACpB,aAAO,IAAP;AACH;;;2CAEsBA,K,EAAO;AAAA;;AAC1Bb,MAAAA,IAAI,CAACsB,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CACI,UAACC,MAAD,EAAY;AACR,YAAI,KAAI,CAAClB,cAAL,EAAJ,EAA2B;AACvBkB,UAAAA,MAAM,CAACd,OAAP,CAAee,aAAf,GAA+Bb,KAA/B;AACH;;AACD,eAAOY,MAAP;AACH,OANL;AAQH;;;;;;AAGL,eAAe,IAAIvB,qBAAJ,EAAf","sourcesContent":["import http from '../http-common'\nimport router from \"@/router\";\n\n\nclass AuthenticationService {\n    registerSuccesfulLogin(username, password) {\n        this.setupAxiosInterceptors(this.createBasicAuthToken(username, password))\n    }\n\n    startAuthentication(username, password) {\n        if(this.isUserLoggedIn()) {\n            return router.replace({name: 'meal'})\n        }\n        return http.get('/basicauth', {headers: {authorization: this.createBasicAuthToken(username, password)}});\n    }\n\n    createBasicAuthToken(username, password) {\n        let token = 'Basic ' + window.btoa(username + \":\" + password);\n        localStorage.setItem('token', token)\n        return token\n    }\n\n    logout() {\n        localStorage.removeItem('token');\n        sessionStorage.clear()\n    }\n\n    isUserLoggedIn() {\n        let token = localStorage.getItem('token');\n        if (token === null) return false\n        return true\n    }\n\n    setupAxiosInterceptors(token) {\n        http.interceptors.request.use(\n            (config) => {\n                if (this.isUserLoggedIn()) {\n                    config.headers.Authorization = token\n                }\n                return config\n            }\n        )\n    }\n}\n\nexport default new AuthenticationService();"]}]}